<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§∏‡•Å‡§™‡§∞ ‡§®‡•ç‡§Ø‡•Ç‡§ú ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f0f2f5; font-family: 'Segoe UI', sans-serif; }
        .navbar { background: #ce1212; box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        .category-scroll { overflow-x: auto; white-space: nowrap; padding: 10px 0; }
        .category-btn { margin: 0 5px; border-radius: 20px; font-weight: bold; border: 2px solid #ce1212; color: #ce1212; background: white; }
        .category-btn.active { background: #ce1212; color: #fff; }
        .news-card { border: none; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 25px; background: #fff; position: relative; }
        .news-img { height: 200px; object-fit: cover; width: 100%; }
        .card-title { font-size: 1.1rem; font-weight: bold; color: #333; height: 3.3em; overflow: hidden; }
        .share-btn { border-radius: 50%; width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; background-color: #25D366; color: white; text-decoration: none; }
        .new-badge { position: absolute; top: 10px; left: 10px; background: red; color: white; padding: 5px 10px; border-radius: 5px; font-weight: bold; font-size: 0.8rem; z-index: 10; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark mb-1">
    <div class="container text-center">
        <a class="navbar-brand fw-bold mx-auto" href="#"><i class="fas fa-newspaper me-2"></i> ‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§∏‡•Å‡§™‡§∞ ‡§®‡•ç‡§Ø‡•Ç‡§ú</a>
    </div>
</nav>

<div class="container text-end mb-2">
    <small class="text-muted">üïí ‡§∂‡•á‡§µ‡§ü‡§ö‡•á ‡§Ö‡§™‡§°‡•á‡§ü: <span id="update-time">--:--</span></small>
</div>

<div class="container mb-4 mt-2">
    <div class="category-scroll text-center">
        <button onclick="changeCategory('general', this)" class="btn category-btn active">‡§§‡§æ‡§ú‡•ç‡§Ø‡§æ ‡§¨‡§æ‡§§‡§Æ‡•ç‡§Ø‡§æ</button>
        <button onclick="changeCategory('market', this)" class="btn category-btn">‡§∂‡•á‡§Ö‡§∞ ‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü</button>
        <button onclick="changeCategory('it_tech', this)" class="btn category-btn">‡§Ü‡§Ø‡§ü‡•Ä/‡§§‡§Ç‡§§‡•ç‡§∞‡§ú‡•ç‡§û‡§æ‡§®</button>
        <button onclick="changeCategory('sports', this)" class="btn category-btn">‡§ï‡•ç‡§∞‡•Ä‡§°‡§æ</button>
        <button onclick="changeCategory('entertainment', this)" class="btn category-btn">‡§Æ‡§®‡•ã‡§∞‡§Ç‡§ú‡§®</button>
    </div>
</div>

<div class="container">
    <div id="news-container" class="row">
        </div>
</div>

<script>
    let newsDatabase = {};

    async function loadAllNews() {
        try {
            const response = await fetch('news_data.json?v=' + new Date().getTime());
            newsDatabase = await response.json();
            renderNews('general');
        } catch (e) {
            document.getElementById('news-container').innerHTML = "<p class='text-center'>‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≤‡•ã‡§° ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á...</p>";
        }
    }

    function renderNews(category) {
        const container = document.getElementById('news-container');
        container.innerHTML = '';
        const articles = newsDatabase[category] || [];

        // Update Time set karne
        if (articles.length > 0 && articles[0].publishedAt) {
            const lastDate = new Date(articles[0].publishedAt);
            document.getElementById('update-time').innerText = lastDate.toLocaleString('mr-IN');
        }

        articles.forEach((article, index) => {
            const shareText = encodeURIComponent(`*${article.title}*\n\n‡§∏‡§µ‡§ø‡§∏‡•ç‡§§‡§∞ ‡§µ‡§æ‡§ö‡§æ: ${article.url}`);
            const waUrl = `https://api.whatsapp.com/send?text=${shareText}`;
            
            // Pahilya 3 batmyanna '‡§®‡§µ‡•Ä‡§®' tag lavne
            const badgeHtml = index < 3 ? '<div class="new-badge">‡§®‡§µ‡•Ä‡§®</div>' : '';

            container.innerHTML += `
                <div class="col-md-6 col-lg-4">
                    <div class="card news-card">
                        ${badgeHtml}
                        <img src="${article.image || 'https://via.placeholder.com/400x200'}" class="news-img" alt="news">
                        <div class="card-body">
                            <h5 class="card-title">${article.title}</h5>
                            <hr>
                            <div class="d-flex justify-content-between align-items-center">
                                <a href="${article.url}" target="_blank" class="btn btn-outline-dark btn-sm rounded-pill">‡§µ‡§æ‡§ö‡§æ</a>
                                <a href="${waUrl}" target="_blank" class="share-btn">
                                    <i class="fab fa-whatsapp"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>`;
        });
    }

    function changeCategory(cat, btn) {
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderNews(cat);
    }

    loadAllNews();
</script>

</body>
</html>
